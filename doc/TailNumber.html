<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: TailNumber
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "TailNumber";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TailNumber</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: TailNumber
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/modules/tail_number.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Provides utilities for interacting with tail numbers.</p>

<p>Tail number uniqueness is considered case insensitive and insensitive to
the presence or absence of dashes. However, tail numbers are nearly always
capitalized, and most countries have either no dash in their tail numbers
or a dash that&#39;s always in the same position in the tail number.
Throughout this module, documentation will refer to formatted tail numbers
and simplified tail numbers. A <strong>formatted</strong> tail number is a
string with dashes in the appropriate place for the country (e.g.
<code>VH-OQI</code>, <code>C-FGRY</code>, <code>N909EV</code>), and a
<strong>simplified</strong> tail number is a string with all dashes removed
(e.g. <code>VHOQI</code>, <code>CFGRY</code>, <code>N909EV</code>).</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#countries-class_method" title="countries (class method)">.<strong>countries</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defines countries and dash formats for various tail number regular
expressions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#country-class_method" title="country (class method)">.<strong>country</strong>(tail_number)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the country associated with a given tail number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#country_format-class_method" title="country_format (class method)">.<strong>country_format</strong>(tail_number)  &#x21d2; Hash{Symbol =&gt; String} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines the country of a tail number and adds appropriate dashes to
match that country&#39;s tail number format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flight_table_data-class_method" title="flight_table_data (class method)">.<strong>flight_table_data</strong>(flights, sort_category = nil, sort_direction = nil)  &#x21d2; Array&lt;Hash&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of tail numbers, <span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> codes (ICAO preferred),
<span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> manufacturers, <span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> names, <span class='object_link'><a href="Airline.html" title="Airline (class)">Airline</a></span> names,
<span class='object_link'><a href="Airline.html" title="Airline (class)">Airline</a></span> slugs, and number of <span class='object_link'><a href="Flight.html" title="Flight (class)">Flights</a></span> on that tail number, sorted
by number of flights descending.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format-class_method" title="format (class method)">.<strong>format</strong>(tail_number)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Takes a tail number and adds dashes as appropriate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#simplify-class_method" title="simplify (class method)">.<strong>simplify</strong>(tail_number)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Capitalizes a tail number and strips non-alphanumeric characters.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="countries-class_method">
  
    .<strong>countries</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defines countries and dash formats for various tail number regular
expressions. Used by other methods to determine a country name and/or a
dash position based on which regular expression a simplified tail number
matches.</p>

<p>The dash position specifies the character position of a dash in a
country&#39;s tail number format (e.g. C-FGRY has a dash postion of 1,
VH-OQI has a dash position of 2). If the dash position is 0, then no dash
is assumed (e.g. N909EV).</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_countries'>countries</span><span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^VH[A-Z]{3}$</span><span class='regexp_end'>/</span></span><span class='rbracket'>]</span> <span class='comment'>#=&gt; {country: &quot;Australia&quot;, dash: 2}</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>tail number regexps as keys, country names and dash positions as values</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#simplify-class_method" title="TailNumber.simplify (method)">simplify</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 29</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_countries'>countries</span>
  <span class='id identifier rubyid_tail_formats'>tail_formats</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='comment'># Highest numbers of aircraft:
</span>    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^N[1-9]((\d{0,4})|(\d{0,3}[A-HJ-NP-Z])|(\d{0,2}[A-HJ-NP-Z]{2}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>United States</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^B((1[5-9]\d{2})|([2-9]\d{3}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>China</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^C[FGI][A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Canada</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^D(([A-CE-IK-O][A-Z]{3})|(\d{4}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Germany</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^G[A-Z]{4}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>United Kingdom</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^F[A-Z]{4}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>France</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^JA((\d{4})|(\d{3}[A-Z])|(\d{2}[A-Z]{2})|(A\d{3}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Japan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^P[PRSTU][A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Brazil</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^EC[A-WY][A-Z]{2}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Spain</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^VT[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>India</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
      
    <span class='comment'># Other countries:
</span>    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^VH[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Australia</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^OE([A-LV-X][A-Z]{2}|[0-59]\d{3})$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Austria</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^OY[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Denmark</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^OH(([A-Z]{3})|(G|U)?(\d{2}[1-9]|\d[1-9]\d|[1-9]\d{2}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Finland</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^9G[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ghana</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^SX[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Greece</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^B[HKL][A-Z]{2}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hong Kong</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^TF(([A-Z]{3})|([1-9]\d{2}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Iceland</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^4X[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Israel</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^JY[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jordan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^9M[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Malaysia</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^PH(([A-Z]{3})|(1[A-Z]{2})|(\d[A-Z]\d)|([1-9]\d{2,3}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Netherlands</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^ZK[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>New Zealand</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^LN[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Norway</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^9V[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Singapore</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^HL[0-9C]\d{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>South Korea</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^SE[A-Z]([A-Z0-9][A-Z1-9]|[A-Z1-9][A-Z0-9])$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sweden</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^B\d{5}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Taiwan</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^HS[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Thailand</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^UR(([A-Z]{3,4})|([1-9]\d{4}))$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ukraine</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^A6[A-Z]{3}$</span><span class='regexp_end'>/</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='label'>country:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>United Arab Emirates</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>dash:</span> <span class='int'>2</span> <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tail_formats'>tail_formats</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="country-class_method">
  
    .<strong>country</strong>(tail_number)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the country associated with a given tail number.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_country'>country</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>N909EV</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;United States&quot;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tail_number</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a formatted or simplified tail number</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a country name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 168</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_country'>country</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_country_format'>country_format</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:country</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="country_format-class_method">
  
    .<strong>country_format</strong>(tail_number)  &#x21d2; <tt>Hash{Symbol =&gt; String}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines the country of a tail number and adds appropriate dashes to
match that country&#39;s tail number format.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_country_format'>country_format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VHOQI</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {country: &quot;Australia&quot;, tail: &quot;VH-OQI&quot;}
</span><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_country_format'>country_format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>N909EV</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; {country: &quot;United States&quot;, tail: &quot;N909EV&quot;}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tail_number</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a formatted or simplified tail number</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; String}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a country name and formatted tail number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 153</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_country_format'>country_format</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tail_number'>tail_number</span> <span class='op'>=</span> <span class='id identifier rubyid_simplify'>simplify</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_country'>country</span> <span class='op'>=</span> <span class='id identifier rubyid_countries'>countries</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='op'>&amp;.</span><span class='id identifier rubyid_last'>last</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='label'>country:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tail:</span> <span class='id identifier rubyid_tail_number'>tail_number</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_country'>country</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='label'>country:</span> <span class='id identifier rubyid_country'>country</span><span class='lbracket'>[</span><span class='symbol'>:country</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>tail:</span> <span class='id identifier rubyid_tail_number'>tail_number</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_country'>country</span><span class='lbracket'>[</span><span class='symbol'>:dash</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='id identifier rubyid_tail'>tail</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_country'>country</span><span class='lbracket'>[</span><span class='symbol'>:dash</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='lbracket'>[</span><span class='id identifier rubyid_country'>country</span><span class='lbracket'>[</span><span class='symbol'>:dash</span><span class='rbracket'>]</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='label'>country:</span> <span class='id identifier rubyid_country'>country</span><span class='lbracket'>[</span><span class='symbol'>:country</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>tail:</span> <span class='id identifier rubyid_tail'>tail</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flight_table_data-class_method">
  
    .<strong>flight_table_data</strong>(flights, sort_category = nil, sort_direction = nil)  &#x21d2; <tt>Array&lt;Hash&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of tail numbers, <span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> codes (ICAO preferred),
<span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> manufacturers, <span class='object_link'><a href="AircraftFamily.html" title="AircraftFamily (class)">AircraftFamily</a></span> names, <span class='object_link'><a href="Airline.html" title="Airline (class)">Airline</a></span> names,
<span class='object_link'><a href="Airline.html" title="Airline (class)">Airline</a></span> slugs, and number of <span class='object_link'><a href="Flight.html" title="Flight (class)">Flights</a></span> on that tail number, sorted
by number of flights descending.</p>

<p>Used on various “index” and “show” views to generate a table of tail
numbers and their flight counts.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>flights</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Flight.html" title="Flight (class)">Flight</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a collection of <span class='object_link'><a href="Flight.html" title="Flight (class)">Flights</a></span> to calculate tail number flight counts for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sort_category</span>
      
      
        <span class='type'>(<tt>:tail</tt>, <tt>:flights</tt>, <tt>:aircraft</tt>, <tt>:airline</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the category to sort the array by</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sort_direction</span>
      
      
        <span class='type'>(<tt>:asc</tt>, <tt>:desc</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the direction to sort the array</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>details for each tail number flown</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 196</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_flight_table_data'>flight_table_data</span><span class='lparen'>(</span><span class='id identifier rubyid_flights'>flights</span><span class='comma'>,</span> <span class='id identifier rubyid_sort_category'>sort_category</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_sort_direction'>sort_direction</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tail_counts'>tail_counts</span> <span class='op'>=</span> <span class='id identifier rubyid_flights'>flights</span><span class='period'>.</span><span class='id identifier rubyid_reorder'>reorder</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='period'>.</span><span class='id identifier rubyid_not'>not</span><span class='lparen'>(</span><span class='label'>tail_number:</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='symbol'>:tail_number</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_tail_details'>tail_details</span> <span class='op'>=</span> <span class='id identifier rubyid_flights'>flights</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='period'>.</span><span class='id identifier rubyid_not'>not</span><span class='lparen'>(</span><span class='label'>tail_number:</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:airline</span><span class='comma'>,</span> <span class='symbol'>:aircraft_family</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tail_details'>tail_details</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_counts'>counts</span> <span class='op'>=</span> <span class='id identifier rubyid_tail_details'>tail_details</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='lbrace'>{</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_tail_number'>tail_number</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
    <span class='label'>airline_slug:</span>  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_airline'>airline</span><span class='period'>.</span><span class='id identifier rubyid_slug'>slug</span><span class='comma'>,</span>
    <span class='label'>airline_name:</span>  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_airline'>airline</span><span class='period'>.</span><span class='id identifier rubyid_airline_name'>airline_name</span><span class='comma'>,</span>
    <span class='label'>aircraft_code:</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_aircraft_family'>aircraft_family</span><span class='op'>&amp;.</span><span class='id identifier rubyid_icao_aircraft_code'>icao_aircraft_code</span> <span class='op'>||</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_aircraft_family'>aircraft_family</span><span class='op'>&amp;.</span><span class='id identifier rubyid_iata_aircraft_code'>iata_aircraft_code</span><span class='comma'>,</span>
    <span class='label'>manufacturer:</span>  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_aircraft_family'>aircraft_family</span><span class='op'>&amp;.</span><span class='id identifier rubyid_manufacturer'>manufacturer</span><span class='comma'>,</span>
    <span class='label'>family_name:</span>   <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_aircraft_family'>aircraft_family</span><span class='op'>&amp;.</span><span class='id identifier rubyid_family_name'>family_name</span><span class='comma'>,</span>
    <span class='label'>departure_utc:</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_departure_utc'>departure_utc</span>
  <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_oldval'>oldval</span><span class='comma'>,</span><span class='id identifier rubyid_newval'>newval</span><span class='op'>|</span> <span class='id identifier rubyid_newval'>newval</span><span class='lbracket'>[</span><span class='symbol'>:departure_utc</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_oldval'>oldval</span><span class='lbracket'>[</span><span class='symbol'>:departure_utc</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id identifier rubyid_newval'>newval</span> <span class='op'>:</span> <span class='id identifier rubyid_oldval'>oldval</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_counts'>tail_counts</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_oldval'>oldval</span><span class='comma'>,</span><span class='id identifier rubyid_newval'>newval</span><span class='op'>|</span> <span class='id identifier rubyid_oldval'>oldval</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='symbol'>:count</span><span class='comma'>,</span> <span class='id identifier rubyid_newval'>newval</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='id identifier rubyid_oldval'>oldval</span><span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='lbrace'>{</span>
      <span class='label'>tail_number:</span>  <span class='id identifier rubyid_k'>k</span><span class='comma'>,</span>
      <span class='label'>count:</span>        <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>country:</span>      <span class='id identifier rubyid_country'>country</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>aircraft:</span>     <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:aircraft_code</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>airline_name:</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:airline_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>airline_slug:</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:airline_slug</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>manufacturer:</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:manufacturer</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='label'>family_name:</span>  <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:family_name</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span><span class='rbrace'>}</span>
    
  
  <span class='kw'>case</span> <span class='id identifier rubyid_sort_category'>sort_category</span>
  <span class='kw'>when</span> <span class='symbol'>:tail</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tail'>tail</span><span class='op'>|</span> <span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:tail_number</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_reverse!'>reverse!</span> <span class='kw'>if</span> <span class='id identifier rubyid_sort_direction'>sort_direction</span> <span class='op'>==</span> <span class='symbol'>:desc</span>
  <span class='kw'>when</span> <span class='symbol'>:flights</span>
    <span class='id identifier rubyid_sort_mult'>sort_mult</span>   <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_sort_direction'>sort_direction</span> <span class='op'>==</span> <span class='symbol'>:asc</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tail'>tail</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sort_mult'>sort_mult</span><span class='op'>*</span><span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:tail_number</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>when</span> <span class='symbol'>:aircraft</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tail'>tail</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:aircraft</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:airline_name</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_reverse!'>reverse!</span> <span class='kw'>if</span> <span class='id identifier rubyid_sort_direction'>sort_direction</span> <span class='op'>==</span> <span class='symbol'>:desc</span>
  <span class='kw'>when</span> <span class='symbol'>:airline</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tail'>tail</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:airline_name</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:aircraft</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_reverse!'>reverse!</span> <span class='kw'>if</span> <span class='id identifier rubyid_sort_direction'>sort_direction</span> <span class='op'>==</span> <span class='symbol'>:desc</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_counts'>counts</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_tail'>tail</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='op'>-</span><span class='lparen'>(</span><span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_tail'>tail</span><span class='lbracket'>[</span><span class='symbol'>:tail_number</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_counts'>counts</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format-class_method">
  
    .<strong>format</strong>(tail_number)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Takes a tail number and adds dashes as appropriate.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CFGRY</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;C-FGRY&quot;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tail_number</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a simplified tail number</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a formatted tail number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 178</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_country_format'>country_format</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:tail</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="simplify-class_method">
  
    .<strong>simplify</strong>(tail_number)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Capitalizes a tail number and strips non-alphanumeric characters.</p>

<p>Tail number uniqueness is considered case insensitive and insensitive to
the presence or absence of dashes, so this method puts the tail number into
a standard simplified format for saving it into the database.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="TailNumber (module)">TailNumber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_simplify'>simplify</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VH-OQI</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;VHOQI&quot;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>tail_number</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a tail number</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a simplified tail number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/modules/tail_number.rb', line 141</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_simplify'>simplify</span><span class='lparen'>(</span><span class='id identifier rubyid_tail_number'>tail_number</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tail_number'>tail_number</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^A-Z0-9]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Sep  9 21:30:33 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>