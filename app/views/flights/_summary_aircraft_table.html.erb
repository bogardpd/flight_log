<% if @aircraft_frequency_sorted.count == 0 %>

<div class="alert">All flights have unknown aircraft families.</div>

<% else %>

<table class="flightlog">
  <tr class="th">
    <th class="counter">#</th>
		<th class="aircraft_family">Aircraft Family</th>
		<th class="aircraft_iata_code">Code</th>
    <th class="aircraft_flights">Flights</th>
  </tr>
<% previous_count = nil %>
<% @aircraft_frequency_sorted.each_with_index do |(aircraft, frequency), index| %>
  <% unless aircraft.nil? %>
  <tr>
		<td class="counter"><%= (frequency == previous_count) ? "â‹®" : index + 1 %></td>
		<td class="aircraft_family"><%= link_to("#{image_tag(aircraft_icon_path(aircraft), alt: @aircraft_family_names[aircraft], class: 'aircraft_icon')}<span class=\"aircraft_manufacturer\">#{@aircraft_family_manufacturers[aircraft]}</span> #{@aircraft_family_names[aircraft]}".html_safe, aircraft_family_path(aircraft), :title => "View all flights on #{@aircraft_family_manufacturers[aircraft]} #{@aircraft_family_names[aircraft]} aircraft") %></td>
		<td class="aircraft_iata_code iata_mono"><%= link_to(aircraft, aircraft_family_path(aircraft), :title => "View all flights on #{@aircraft_family_manufacturers[aircraft]} #{@aircraft_family_names[aircraft]} aircraft") %></td>
		<td class="aircraft_flights"><%= render "flights/graph_block", :value => frequency, :maximum => @aircraft_frequency_maximum %></td>
  </tr>
		<% previous_count = frequency %>
  <% end %>
<% end %>
  <tr><td colspan="4" class="flightlog_total"><%= pluralize(@aircraft_frequency_sorted.count, 'aircraft family') %></td></tr>
</table>

<% if @unknown_aircraft_flights > 1 %>
<p class="center"><%= @unknown_aircraft_flights %> flights with unknown aircraft families are not included in this table.</p>
<% elsif @unknown_aircraft_flights > 0 %>
<p class="center">1 flight with an unknown aircraft family is not included in this table.</p>
<% end %>

<% end %>