<% if flight.trip_section == @previous_section && flight.trip_id == @previous_trip %>
	<% @tr_style = "no-top-border" %>
<% else %>
	<% @tr_style = "" %>
<% end %>


<tr class="<%= @tr_style %>">
	
  <td class="counter"><%= (@sort_cat == :departure && @sort_dir == :desc) ? @flights.length - flight_counter : flight_counter + 1 %></td>
	
	<td class="flight-flight<%= @top_row_style %>"><%= %Q(<div class="hidden-marker">Hidden</div>).html_safe if flight.trip.hidden %><%= link_to(image_tag(Airline.icon_path(flight.airline.iata_airline_code), title: flight.airline.airline_name, alt: flight.airline.iata_airline_code, class: "airline_icon") + "#{flight.airline.airline_name} #{flight.flight_number.to_s}", flight_path(flight), title: "View flight details for #{flight.airline.airline_name} #{flight.flight_number.to_s}") %></td>
	<td class="flight-route<%= @top_row_style %>">
		<%= (params[:controller] == "airports" && params[:action] == "show" && @airport.id == flight.origin_airport_id) ? code_mono(flight.origin_airport.iata_code) : link_to(code_mono(flight.origin_airport.iata_code), airport_path(flight.origin_airport.iata_code), title: "View airport details for #{flight.origin_airport.city}") %> <%= Route::ARROW_ONE_WAY_HTML %> <%= (params[:controller] == "airports" && params[:action] == "show" && @airport.id == flight.destination_airport_id) ? code_mono(flight.destination_airport.iata_code) : link_to(code_mono(flight.destination_airport.iata_code), airport_path(flight.destination_airport.iata_code), title: "View airport details for #{flight.destination_airport.city}") %>
	</td>
	<td class="flight-date<%= @top_row_style %>"><%= Flight.format_date(flight.departure_date) %></td>
	
</tr>
<% @previous_trip = flight.trip_id %>
<% @previous_section = flight.trip_section %>

